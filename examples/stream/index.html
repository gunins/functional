<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="../../node_modules/requirejs/require.js"></script>
    <script>
        'use strict';

        require.config({
            baseUrl: './dist'
        });
    </script>
    <style>
        .half {
            width: 50%;
            float: left;
        }

        .clear {
            clear: both;
        }
    </style>

</head>
<body>
<h3>Example, for pulling items, and display Products and items separatelly.</h3>
<div class="half">
    <h4>List of Items</h4>
    <div class="itemsList"></div>
</div>
<div class="half">
    <h4>List of products</h4>
    <div class="productList"></div>
</div>
<div class="clear"></div>
<script>
    require(['./index'], (samples) => {
        'use strict';
        let {request, addId, stream} = samples;

        /*Just simple template for js arrays*/
        let templateInner = data => data.map(obj => `<li>${obj.id} <strong>Name:</strong> <span>${obj.Name}</span> <strong>Price: </strong><span>${obj.Price}</span></li>`).join('\n');
        let templateOuter = str => `<ul>${str}</ul>`;

        let applyData = (selector, data) => document.querySelector(selector).innerHTML = data;

        /*from addId create new task, with apply Template */
        let applyTemplate = addId
        /*Apply inner template*/
            .map(tmpl => Object.assign(tmpl, {
                data: templateInner(tmpl.data)
            }))
            /*apply outer template*/
            .map(tmpl => Object.assign(tmpl, {
                data: templateOuter(tmpl.data)
            }));

        let getItems = request();
        let itemList = getItems.map(data => ({
            id:   '.itemsList',
            data: data.items
        }));
        let productList = getItems.map(data => ({
            id:   '.productList',
            data: data.products
        }))

        /*For stream advantage, you can collect two different streams, and later apply same tasks*/
        let itemStream = stream(itemList, productList)
            .through(applyTemplate)
            /*Apply parsed string to dom element*/
            .resolve(tmpl => applyData(tmpl.id, tmpl.data));

        itemStream.unsafeRun();

    });
</script>
</body>
</html>